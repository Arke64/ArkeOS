OFFSET 0x00
CONST 0x000000444556494E
MOV 0x500 RSP
MOV (RIP + 0d5) S
MOV {SetupInterrupts} RIP
MOV (RIP + 0d5) S
MOV {Add} RIP
BRK
MOV (RIP + 0d5) S
MOV {AddressingTest} RIP
BRK
HLT

LABEL Add
MOV 0d10 R0
LABEL AddStart
ADD R0 R1 R1
SUB 0d1 R0 R0
MVNZ R0 {AddStart} RIP
MOV S RIP

LABEL AddressingTest
MOV 0d8 R0
MOV 0d3 R1
MOV 0d2 R2
MOV 0xDEADBEEF [0d15]
MOV 0xFACEBEEF R5
MOV [(R0 + R1 * R2 + 0d1)] R4
MOV R5 [(R0 + R1 * R2 + 0d1)]
MOV [(R0 + R1 * R2 + 0d1)] R6
MOV 0d1 S
MOV 0d2 S
ADD S S S
MOV S R7
MOV S RIP

LABEL SetupInterrupts
//Devices
MOV {Keyboard} [0x10000000010005]

//Standard
MOV 0x00 [0x10000000011000]
MOV 0x00 [0x10000000011001]
MOV 0x00 [0x10000000011002]
MOV 0x00 [0x10000000011003]
MOV 0x00 [0x10000000011004]
MOV {SystemTimer} [0x10000000011005]
MOV 0x00 [0x10000000011006]
MOV 0x00 [0x10000000011007]
MOV 0x00 [0x10000000011008]
MOV 0x00 [0x10000000011009]
MOV 0x00 [0x1000000001100A]
MOV 0x00 [0x1000000001100B]
MOV 0x00 [0x1000000001100C]
MOV 0x00 [0x1000000001100D]
MOV 0x00 [0x1000000001100E]
MOV 0x00 [0x1000000001100F]
MOV S RIP

LABEL SystemTimer
ADD 0d1 R8 R8
EINT

LABEL Keyboard
ADD 0d1 R15 R15
MOV RINT [(0x40000000000000 + R15)]
EINT